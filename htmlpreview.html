<html>
<head>
   <style id="predefined"></style>
</head>
<body>
<script>
var href=decodeURIComponent(window.location.href),
    h=document.body,
    getClass=function(i){return document.getElementsByClassName(i)},
    getId=function(i){return document.getElementById(i)},
    addScriptWithText=function(txt,node){var scr=document.createElement('script').appendChild(document.createTextNode(txt));node.appendChild(scr)},
    loadScripts=[];
function wheninput(){var is="https://williek11.github.io/htmlpreview.html?"+getId("code").value;var link=getId("link");link.innerText=is;link.href=is}
function whenPreview(){
   // event listener and css stuff
   getId("edit")
      .className="inactive"
      .addEventListener("click",whenEdit)
   getId("preview")
      .className="active"
      .removeEventListener("click",whenPreview)
}
function whenEdit(){
   // event listener and css stuff
   getId("edit")
      .removeEventListener("click",whenEdit)
      .className="active"
   getId("preview")
      .addEventListener("click",whenPreview)
      .className="inactive"
}
if(href.includes("?")){
  
  var txt=href.substr(href.indexOf("?",43)+1,href.length)
  var html=txt
  
  if(txt.includes("type:")){
     var val=txt.indexOf("type:",0)+5;
     var pre=getId("predefined")
     var str=txt.substr(val-5,txt.indexOf(":",6)-val+6)
     var types=str.replace("type:","").replace(":","").split("&")
     var cssAdd=(css)=>{pre.innerHTML+=css}
     for(var i=0;i<types.length;i++) {
       switch (types[i]) {
         case "fonts":cssAdd("html{font-family:Arial, Verdana, Tahoma, Trebuchet MS}");break
         case "clean":cssAdd("html,body{padding:0;margin:0}");break
         case "styleless":cssAdd("*{margin:0;padding:0;border:0;background:0;width:unset;height:unset}");break
         case "edit":
           cssAdd(`
@import url('https://fonts.googleapis.com/css2?family=Rowdies:wght@300&display=swap');
#modes div{margin-left: 20px;width: 100px;height: 25px;border-radius: 10px 10px 0 0}
.active{background: #888;color:#fff}
.inactive{background: none;color:#888;cursor:pointer}`)
           html=`
<div id="modes" style="border-bottom: 2px #999 solid;margin-bottom: 10px;display: flex;font-family: Rowdies;text-align: center;line-height: 25px;">
    <div class="active" id="edit">Edit Code</div>
    <div class="inactive" id="preview">Preview</div>
</div>
<textarea oninput="wheninput()" style="margin-bottom: 10px;border:#0006 2px solid;border-radius:5px;box-shadow:0 5px #0005;width:calc(100% - 44px);height:400px;resize:none;padding:20px" id="code">${txt}</textarea>
<a id="link" style="color:#888;font-family:Rowdies;font-weight: 100;display:block;word-wrap: break-word;width:100%"></a>`
           loadScripts.push({type: "txt", node: h, code: "getId('preview').addEventListener('click',whenPreview)"})
           break
       }
     }
    html=html.replace(str,"")
  }
  /*if(txt.includes("<html ")){
    var atrs=[],quotation=[];
    var tagIndex=txt.indexOf("<html ",0)+5
    var search=txt.substr(tagIndex,txt.indexOf(">",tagIndex)-tagIndex)
    for(var i=0,initial=true,l=search.length;i<l;i++){var s=search[i];if(s==="'"||s===`"`||s==="`"){
      var arr=[];
      arr[0]=i
      if(initial){arr[1]=true;initial=false}else{arr[1]=false;initial=true}
      quotation.push(arr)
    }}
    for(var i=0;i<quotation.length;i++){if(i!==1){
    
    }}
    txt=quotation
  }*/
  h.innerHTML=html
   for(var i=0;i<loadScripts.length;i++){
     addScriptWithText(loadScripts[i].code, loadScripts[i].node)
   }
}
else{h.innerHTML="Hello! This is a test website. Insert ? at the end of the link and you can put HTML code afterwards!"}
</script>
</body>
</html>
