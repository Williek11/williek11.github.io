<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Document</title><style>html,body{margin:0;padding:0;background:#000;overflow:hidden}</style></head><body><canvas id="highlight"></canvas><canvas id="canvas"></canvas><script>!function(){const t=document,s=t.body,e=t.getElementById("canvas"),n=e.getContext("2d");e.width=innerWidth,e.height=innerHeight;const i=t.getElementById("highlight"),o=i.getContext("2d");i.width=innerWidth,i.height=innerHeight,n.font="14px monospace",n.fillStyle="#fff",o.fillStyle="#666";const u=n.measureText("a").width,g=[""];let a=0,f=0,l=0,r=0,d=0;var h=Math.floor(innerHeight/17);Math.floor(innerWidth/u);let c=setTimeout(function(){}),v=!0;function p(){n.clearRect(0,0,innerWidth,innerHeight);for(var t=0,e=g.length;t<e;t++)n.fillText(g[t],r,17*t+17-d)}function w(t){if(o.clearRect(0,0,innerWidth,innerHeight),void 0!==t)for(var e=0,n=(b=t).length;e<n;e++)o.fillRect(t[e].x,t[e].y,t[e].w,19)}function y(){n.fillRect(Math.round(a*u-r),17*f+6-d,1,15),c=setTimeout(x,600)}function x(){n.clearRect(Math.round(a*u-r),17*f+6-d,1,15),c=setTimeout(y,600)}function m(){n.fillRect(Math.round(a*u-r),17*f+6-d,1,15),clearTimeout(c),c=setTimeout(x,600),v=!0}function T(){for(var t=b.length,e=0;e<t;e++){var n=b[e].x/u,i=b[e].y/17,o=b[e].w/u;o<0?(g[i]=g[i].slice(0,n- -1*o)+g[i].slice(n),console.log(e)):g[i]=g[i].slice(0,n)+g[i].slice(n+o)}f=Math.min(L[1],M[1]),a=L[1]===M[1]?Math.min(L[0],M[0]):(L[1]>M[1]?M:L)[0],1<t&&(g[f]=g[f]+g[f+1],2<t&&g.splice(f+1,t-2),g.splice(f+1,1))}let b=[],L=[0,0],M=[0,0],R=!1,E="e";const C={CTRL:!1},k={A:function(){navigator.clipboard.writeText(g.join("\n"))},a:function(){navigator.clipboard.writeText(g.join("\n"))},V:function(){},v:function(){}},A={ArrowLeft:function(){(l=0)===a!=!1?void 0===g[f-1]!=!0&&0<f==!0&&(f--,a=g[f].length):a--},ArrowRight:function(){l=0,a>g[f].length-1!=!1?void 0===g[f+1]!=!0&&f<g.length==!0&&(f++,a=0):a++},Control:function(){C.CTRL=!0},ArrowUp:function(){if(0===f==!0)return a=0,void(l=0);f--,d/17>f&&d/17<f+2&&(d-=17),g[f].length>l!=!0||l>a!=!0?g[f].length>l!=!1||l>a!=!0?a>g[f].length==!0&&(a>l==!0&&(l=a),a=g[f].length):a=g[f].length:a=l},ArrowDown:function(){if(f===g.length-1==!0)return a=g[f].length,void(l=g[f].length);f++,f>=h&&d/17+h<g.length&&(d+=17),g[f].length>l!=!0||l>a!=!0?g[f].length>l!=!1||l>a!=!0?a>g[f].length==!0&&(a>l==!0&&(l=a),a=g[f].length):a=g[f].length:a=l},Enter:function(){g[f].length>a==!0?(g.splice(f+1,0,g[f].substr(a)),g[f]=g[f].substr(0,a)):g.splice(f+1,0,""),f++,a=0,f>=h&&(d+=17)},Backspace:function(){if(0<b.length)T();else if(0!==a||0!==f){if(0===a==!0&&0<f==!0)return f--,a=g[f].length,g[f]=g[f]+g[f+1],void g.splice(f+1,1);g[f]=g[f].substr(0,a-1)+g[f].substr(a),a--}},Delete:function(){if(a===g[f].length==!0&&f<g.length-1==!0)return g[f]=g[f]+g[f+1],void g.splice(f+1,1);g[f]=g[f].substr(0,a)+g[f].substr(a+1)},default:function(){0<b.length&&(T(),b=[],w()),1===E.length!=!1&&(g[f]=g[f].substr(0,a)+E+g[f].substr(a),a++,p(),m())}};t.addEventListener("keydown",function(t){if(E=t.key,!0===C.CTRL&&void 0!==k[E])return k[E](),p(),void m();void 0!==A[E]?(A[E](),0<b.length&&(b=[],w()),p(),m()):A.default()}),t.addEventListener("keyup",function(t){"Control"===t.key&&(C.CTRL=!1)}),t.addEventListener("paste",function(t){const e=(t.clipboardData||clipboardData).getData("text"),n=e.split("\n");var i=f+n.length-1,t=1===n.length?a+n[0].length:n[n.length-1].length;g[f]=g[f]+n[0],g.splice(f+1,0,...n.splice(1,n.length-1)),a=t,f=i,p(),m()}),t.addEventListener("mousemove",function(t){var e=Math.ceil(t.pageX/u),n=Math.floor(d/17+t.pageY/17);if(void 0!==g[n]&&!0===R){M=[e>g[n].length?g[n].length:e,n];var i=L[0],o=L[1],l=M[0],r=M[1];if(f=n,a=e,a>g[f].length&&(a=g[f].length),o===r)return w([{x:i*u,y:17*o,w:(l-i)*u}]),p(),void m();{const c=[];if(o<r)for(var h=0;h<r-o+1;h++)0!==h?h!==r-o?c.push({x:0,y:17*(o+h),w:g[o+h].length*u}):c.push({x:0,y:17*r,w:l*u}):c.push({x:i*u,y:17*o,w:(g[o].length-i)*u});else for(h=0;h<o-r+1;h++)0!==h?h!==o-r?c.push({x:0,y:17*(r+h),w:g[r+h].length*u}):c.push({x:0,y:17*o,w:i*u}):c.push({x:l*u,y:17*r,w:(g[r].length-l)*u});w(c),p(),m()}}void 0!==g[n]&&t.pageX<g[n].length*u?s.style.cursor="text":"text"===s.style.cursor&&(s.style.cursor="initial")}),t.addEventListener("mousedown",function(t){var e=Math.ceil(t.pageX/u),n=Math.floor(d/17+t.pageY/17);void 0!==g[n]&&t.pageX<g[n].length*u&&(R=!0,L=[e,n])}),t.addEventListener("mouseup",function(){setTimeout(function(){R=!1},1)}),t.addEventListener("click",function(){!0!==R&&(b=[],w())})}();</script></body></html>
